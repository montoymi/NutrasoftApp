<ion-header>
	<ion-navbar>
		<ion-title>{{ 'DIET_TITLE' | translate }}</ion-title>
		<ion-buttons end>
			<button ion-button icon-only (click)="doGenerateDiet()">
				<ion-icon name="cog"></ion-icon>
			</button>
			<button ion-button icon-only (click)="presentPopover($event)">
				<ion-icon name="more"></ion-icon>
			</button>
		</ion-buttons>
	</ion-navbar>
</ion-header>

<ion-content>
	<ion-list *ngIf="menu">
		<ion-item>
			<h2>{{ menu.name }}</h2>
		</ion-item>
		<ion-item>
			<ion-grid no-padding>
				<ion-row>
					<ion-col>
						{{ 'GOAL_VALUES'| translate }}
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ menu.planDay.pro }} P</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ menu.planDay.cho }} C</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ menu.planDay.fat }} G</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ menu.planDay.energIntake }} kcal</p>
					</ion-col>
					<ion-col text-right col-3 showWhen="portrait">
						<p>{{ menu.planDay.energIntake }} kcal</p>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
		<ion-item no-lines>
			<ion-grid no-padding>
				<ion-row>
					<ion-col>
						{{ 'TOTAL_VALUES'| translate }}
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ totalPro }} P</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ totalCho }} C</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ totalFat }} G</p>
					</ion-col>
					<ion-col text-right col-2 hideWhen="portrait">
						<p>{{ totalEnerg }} kcal</p>
					</ion-col>
					<ion-col text-right col-3 showWhen="portrait">
						<p>{{ totalEnerg }} kcal</p>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
		<ion-item-group *ngFor="let menuMeal of menu.menuMealList">
			<ion-item-divider sticky (click)="toggleDetails(menuMeal)">
				<ion-grid no-padding>
					<ion-row>
						<ion-col>
							{{ menuMeal.meal.name }}
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ menuMeal.dish.totalPro }} P</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ menuMeal.dish.totalCho }} C</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ menuMeal.dish.totalFat }} G</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ menuMeal.dish.totalEnerg }} kcal</p>
						</ion-col>
						<ion-col text-right col-3 showWhen="portrait">
							<p>{{ menuMeal.dish.totalEnerg }} kcal</p>
						</ion-col>
					</ion-row>
					<ion-row>
						<ion-col>
							<p>{{ menuMeal.dish.name }}</p>
						</ion-col>
						<ion-col text-right col-1>
							<ion-icon [name]="menuMeal.icon"></ion-icon>
						</ion-col>
					</ion-row>
				</ion-grid>
			</ion-item-divider>

			<button ion-item *ngFor="let dishPartFood of menuMeal.dish.dishPartFoodList" [hidden]="!menuMeal.showDetails" (click)="openEquivalentMeasurePage(dishPartFood)">
				<ion-grid no-padding>
					<ion-row>
						<ion-col>
							<h2>{{ dishPartFood.food.name }}</h2>
						</ion-col>
					</ion-row>
					<ion-row>
						<ion-col>
							<p>{{ dishPartFood.weight }} g</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ dishPartFood.pro }} P</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ dishPartFood.cho }} C</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ dishPartFood.fat }} G</p>
						</ion-col>
						<ion-col text-right col-2 hideWhen="portrait">
							<p>{{ dishPartFood.energ }} kcal</p>
						</ion-col>
						<ion-col text-right col-3 showWhen="portrait">
							<p>{{ dishPartFood.energ }} kcal</p>
						</ion-col>
					</ion-row>
				</ion-grid>
			</button>
		</ion-item-group>
	</ion-list>
</ion-content>